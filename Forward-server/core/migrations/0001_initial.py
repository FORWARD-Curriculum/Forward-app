# Generated by Django 5.2 on 2025-11-14 21:14

import core.models
import django.contrib.auth.models
import django.contrib.auth.validators
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import django_jsonform.models.fields
import martor.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='ConceptMap',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('content', martor.models.MartorField(default='')),
            ],
            options={
                'verbose_name': 'Concept Map',
                'verbose_name_plural': 'Concept Maps',
            },
        ),
        migrations.CreateModel(
            name='CustomActivity',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('document', models.FileField(help_text='\n                                    This is an HTML document that has no external dependencies other than image files.<br>\n                                    Once this activity is saved, all detected images in the document will be displayed below.\n                                    Images that are referenced can furthermore be uploaded farther down below BUT must have the\n                                    exact same name as found in the "Detected Images" section for them to work.<br>\n                                    Once those images are saved, the preview should show the expected document as was in your\n                                    editor of choice. This is the same exact view students will have in-app.<br><br>Provided under\n                                    the following dropdown is an AI prompt you can copy and paste at the start of creating a custom activity\n                                    to hopefully ensure you do not get any errors on upload.\n                                    <details><summary>AI Prompt</summary>\n                                    <code>\n                                        SYSTEM:: You are a frontend developer tasked with taking some description of a simple activity and writing\n                                        code to achieve that vision. Functionally, whenever the activity achieves some state of being "complete",\n                                        you must post a message to the window\'s parent as follows: `window.parent.postMessage({ type: "activityEnd" }}, "*")` \n                                        this tells the greater app that the activity is finished and the student may proceed. If you are unsure of what\n                                        constitutes a completion state for the activity you will be tasked to implement, please ask the USER for more\n                                        clarification to ensure correct results. If the activity does not have a completion state, you must still post:\n                                        `window.parent.postMessage({ type: "activityEnd" }}, "*")` to the window\'s parent by default somewhere in the document.\n                                        If you neglect to do so, the student will be stuck on the activity provided and will be unable to proceed.\n                                        Functionality should, if not specified one way or another by the USER, be reactive to student input via callback\n                                        functions. You may not use any external libraries, as this is a single HTML file bundled with images. DO NOT\n                                        reference external stylesheets or scripts, as only referenced images will be bundled in the full production release\n                                        of the app. Please inline all styles and scripts into `style` and `script` tags, while all images must not be in\n                                        any subdirectory, just the same unpathed filename. When you have re-read over this system prompt at least 3 times,\n                                        respond to the user as an assistant with the phrase "Please describe the activity you have in mind:" and await further\n                                        instruction. Thank you. ::SYSTEM\n                                    </details>\n                                ', upload_to='', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['html']), core.models.CustomActivity.validate_passing_script])),
            ],
            options={
                'verbose_name': 'Custom Activity',
                'verbose_name_plural': 'Custom Activities',
            },
        ),
        migrations.CreateModel(
            name='DndMatch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('strict', models.BooleanField(default=True, help_text='Whether matches must be exact or if any match is allowed')),
                ('content', django_jsonform.models.fields.JSONField(help_text='List of DND match categories and their associated items')),
            ],
            options={
                'verbose_name': "Drag N' Drop",
                'verbose_name_plural': "Drag N' Drops",
            },
        ),
        migrations.CreateModel(
            name='Embed',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('link', models.TextField(help_text='a valid link')),
                ('code', models.TextField(blank=True, default=None, help_text='A string of a code to determine if the user may procede', null=True)),
            ],
            options={
                'verbose_name': 'Web Embed',
                'verbose_name_plural': 'Web Embeds',
                'ordering': ['order', 'created_at'],
            },
        ),
        migrations.CreateModel(
            name='Facility',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, unique=True)),
                ('code', models.CharField(help_text='Unique code for the facility, used for user association on signup', max_length=50, unique=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Facility',
                'verbose_name_plural': 'Facilities',
            },
        ),
        migrations.CreateModel(
            name='FillInTheBlank',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('image', models.ImageField(blank=True, null=True, upload_to='public/fillintheblank/images/')),
                ('content', django_jsonform.models.fields.JSONField(help_text='\n                             <details>\n                             <summary>Help with formatting Fill in The Blank sentances.</summary>\n                               <p>This is an array of strings, where each string can contain special <code>&lt;options&gt;</code> tags to define an interactive element. There are three distinct ways to use these tags:</p>\n\n  <h3>1. Dropdown Menu</h3>\n  <p>This use case is for when you want users to select the correct answer from a predefined list.</p>\n\n  <ul>\n    <li>\n      <strong>Syntax</strong>: The <code>&lt;options&gt;</code> tag contains a comma-separated list of choices. The correct answer is prefixed with an asterisk (<code>*</code>).\n    </li>\n    <li>\n      <strong>Example</strong>: To create a dropdown with "an animal", "a bird", and "a fish" as options, where "an animal" is the correct answer, you would write:\n      <pre><code>"Cats are &lt;options&gt;*an animal, a bird, a fish&lt;/options&gt;."</code></pre>\n    </li>\n  </ul>\n\n  <h3>2. Keyword-Based Text Input</h3>\n  <p>This is used for a text input field where multiple different answers could be considered correct.</p>\n\n  <ul>\n    <li>\n      <strong>Syntax</strong>: The <code>&lt;options&gt;</code> tag includes the <code>keyword="true"</code> attribute and contains a comma-separated list of acceptable answers. The user\'s input will be marked correct if it matches any of these keywords.\n    </li>\n    <li>\n      <strong>Example</strong>: To create a text field where "blue", "clear", or "bright" are all correct answers, you would write:\n      <pre><code>"The sky is &lt;options keyword="true"&gt;blue, clear, bright&lt;/options&gt;."</code></pre>\n    </li>\n  </ul>\n\n  <h3>3. Free Text Input</h3>\n  <p>This is used for an open-ended text input where any non-empty answer is considered correct.</p>\n\n  <ul>\n    <li>\n      <strong>Syntax</strong>: The <code>&lt;options&gt;</code> tag is left empty.\n    </li>\n    <li>\n      <strong>Example</strong>: To create a simple text input field for a user\'s favorite color, you would write:\n      <pre><code>"My favorite color is &lt;options&gt;&lt;/options&gt;."</code></pre>\n    </li>\n  </ul></details>', verbose_name='Sentences')),
            ],
            options={
                'verbose_name': 'Fill in the Blank',
                'verbose_name_plural': 'Fill in the Blanks',
            },
        ),
        migrations.CreateModel(
            name='Identification',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('minimum_correct', models.PositiveIntegerField(blank=True, default=None, null=True)),
                ('feedback', models.CharField(blank=True, default='', max_length=2000, null=True)),
            ],
            options={
                'verbose_name': 'Identification',
                'verbose_name_plural': 'Identifications',
            },
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('username', models.CharField(error_messages={'unique': 'A user with that username already exists.'}, help_text='Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.', max_length=150, unique=True, validators=[django.contrib.auth.validators.UnicodeUsernameValidator()], verbose_name='username')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='email address')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('display_name', models.CharField(max_length=50, validators=[django.core.validators.MinLengthValidator(2)], verbose_name='display name')),
                ('profile_picture', models.CharField(blank=True, default=None, max_length=50, null=True, verbose_name='profile picture link')),
                ('consent', models.BooleanField(default=False, max_length=1, verbose_name='tracking consent')),
                ('theme', models.CharField(default='light', max_length=13, verbose_name='theme preference')),
                ('text_size', models.CharField(default='txt-base', max_length=8, verbose_name='text size preference')),
                ('speech_uri_index', models.PositiveIntegerField(blank=True, null=True, verbose_name='webSpeech uri')),
                ('speech_speed', models.FloatField(blank=True, null=True, verbose_name='webSpeech speed')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('surveyed_at', models.DateTimeField(blank=True, default=None, null=True)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to. A user will get all permissions granted to each of their groups.', related_name='user_set', related_query_name='user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='user_set', related_query_name='user', to='auth.permission', verbose_name='user permissions')),
                ('facility', models.ForeignKey(blank=True, help_text='The facility this user is associated with, if any', null=True, on_delete=django.db.models.deletion.CASCADE, to='core.facility')),
            ],
            options={
                'verbose_name': 'user',
                'verbose_name_plural': 'users',
            },
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='BugReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('description', models.TextField(help_text='A detailed description of the bug')),
                ('steps_to_reproduce', models.TextField(help_text='Steps to reproduce the bug')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('recent_window_locations', models.JSONField(default=list, help_text='List of recent window locations leading up to the bug report')),
                ('app_state', models.JSONField(default=dict, help_text='Snapshot of the application state at the time of the bug report')),
                ('device_info', models.JSONField(default=dict, help_text="Information about the user's device and environment")),
                ('app_version', models.CharField(help_text='Version of the application', max_length=100)),
                ('user', models.ForeignKey(help_text='The user who reported the bug', on_delete=django.db.models.deletion.CASCADE, related_name='bug_reports', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Bug Report',
                'verbose_name_plural': 'Bug Reports',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='CustomActivityImageAsset',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(upload_to='public/custom_activities/images/')),
                ('custom_activity', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='custom_activity_assets', to='core.customactivity')),
            ],
        ),
        migrations.CreateModel(
            name='IdentificationItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('order', models.PositiveIntegerField(default=0)),
                ('hints', models.BooleanField(default=True, help_text='If true, will show a cursor pointer over unidentified areas to help with selection, just like  <code style="cursor: pointer; color: var(--error-fg)">when you hover over this text</code>.')),
                ('areas', django_jsonform.models.fields.JSONField(blank=True, help_text='This field is a list of selectable rectangles on the image. Any rectangles you define in the list will show \n        up after this Activity has been saved, this means, to see any rectangles you must save at least once.', null=True, verbose_name='Coordinates')),
                ('image', models.ImageField(help_text='The image below automatically shows\n        percentage values when hovered. If the tooltop at the bottom is not visible, holding still for a bit will show a tooltop\n        with the percentage of the image you are hovered over.', upload_to='public/identification/items/images')),
                ('identification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='identItems', to='core.identification')),
            ],
            options={
                'ordering': ('order',),
            },
        ),
        migrations.CreateModel(
            name='Lesson',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the lesson', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('active', models.BooleanField(default=False, help_text='Wether or not the lesson is shown to students. Keep this unchecked until you        are ready for students to start taking this lesson.')),
                ('description', models.TextField(help_text='A detailed description of what the lesson covers')),
                ('objectives', django_jsonform.models.fields.JSONField(default=list, help_text='List of learning objectives for this lesson')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('order', models.PositiveIntegerField(blank=True, help_text='Optional ordering within a curriculum', null=True)),
                ('tags', django_jsonform.models.fields.JSONField(blank=True, default=list, help_text='Tags for categorizing and searching lessons')),
                ('image', models.ImageField(blank=True, help_text='Optional image to represent the lesson in the dashboard', null=True, upload_to='public/lesson/')),
            ],
            options={
                'verbose_name': 'Lesson',
                'verbose_name_plural': 'Lessons',
                'ordering': ['order', 'created_at'],
                'indexes': [models.Index(fields=['order'], name='core_lesson_order_84bf95_idx')],
            },
        ),
        migrations.CreateModel(
            name='IdentificationResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('identified', models.IntegerField(default=0)),
                ('associated_activity', models.ForeignKey(help_text='The identification activity associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_identification', to='core.identification')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Identification Response',
                'verbose_name_plural': 'Identification Responses',
            },
        ),
        migrations.AddField(
            model_name='identification',
            name='lesson',
            field=models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson'),
        ),
        migrations.CreateModel(
            name='FillInTheBlankResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('submission', models.JSONField(help_text="Array of user's answers for each blank")),
                ('associated_activity', models.ForeignKey(help_text='The fill in the blank activity associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_fillintheblank', to='core.fillintheblank')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Fill in the Blank Response',
                'verbose_name_plural': 'Fill in the Blank Responses',
            },
        ),
        migrations.AddField(
            model_name='fillintheblank',
            name='lesson',
            field=models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson'),
        ),
        migrations.CreateModel(
            name='EmbedResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('associated_activity', models.ForeignKey(help_text='The embed activity associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_embed', to='core.embed')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Embed Response',
                'verbose_name_plural': 'Embed Responses',
            },
        ),
        migrations.AddField(
            model_name='embed',
            name='lesson',
            field=models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson'),
        ),
        migrations.CreateModel(
            name='DndMatchResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('submission', django_jsonform.models.fields.JSONField()),
                ('associated_activity', models.ForeignKey(help_text='The DnD match activity associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_dndmatch', to='core.dndmatch')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
            ],
            options={
                'verbose_name': "Drag N' Drop Response",
                'verbose_name_plural': "Drag N' Drop Responses",
            },
        ),
        migrations.AddField(
            model_name='dndmatch',
            name='lesson',
            field=models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson'),
        ),
        migrations.CreateModel(
            name='CustomActivityResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('associated_activity', models.ForeignKey(help_text='The custom activity this response is for', on_delete=django.db.models.deletion.CASCADE, related_name='custom_activity_responses', to='core.customactivity')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Custom Activity Response',
                'verbose_name_plural': 'Custom Activity Responses',
            },
        ),
        migrations.AddField(
            model_name='customactivity',
            name='lesson',
            field=models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson'),
        ),
        migrations.CreateModel(
            name='ConceptMapResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('associated_activity', models.ForeignKey(help_text='The concept map associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_conceptmap', to='core.conceptmap')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Concept Map Response',
                'verbose_name_plural': 'Concept Map Responses',
            },
        ),
        migrations.AddField(
            model_name='conceptmap',
            name='lesson',
            field=models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson'),
        ),
        migrations.CreateModel(
            name='Concept',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('image', models.ImageField(help_text='An image representing the concept.', upload_to='public/concept/')),
                ('description', martor.models.MartorField(help_text='A detailed description of the concept')),
                ('examples', django_jsonform.models.fields.JSONField(help_text='List of examples for this concept')),
                ('concept_map', models.ForeignKey(help_text='The concept map this concept belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='concepts', to='core.conceptmap')),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Concept Map Concept',
                'verbose_name_plural': 'Concept Map Concepts',
            },
        ),
        migrations.CreateModel(
            name='LikertScale',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('content', django_jsonform.models.fields.JSONField(help_text='Content for the Likert scale activity')),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Likert Scale',
                'verbose_name_plural': 'Likert Scales',
            },
        ),
        migrations.CreateModel(
            name='LikertScaleResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('content', models.JSONField(help_text="The user's responses to the likert scale")),
                ('associated_activity', models.ForeignKey(help_text='The likert scale associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_likertscale', to='core.likertscale')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Likert Scale Response',
                'verbose_name_plural': 'Likert Scale Responses',
            },
        ),
        migrations.CreateModel(
            name='Poll',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('config', models.JSONField(default=dict, help_text='Configuration options for poll display and behavior')),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Poll',
                'verbose_name_plural': 'Polls',
            },
        ),
        migrations.CreateModel(
            name='PollQuestion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('question_text', models.TextField(help_text='The text of the poll question')),
                ('options', models.JSONField(help_text='Available options for the poll question')),
                ('allow_multiple', models.BooleanField(default=False, help_text='Whether multiple options can be selected')),
                ('order', models.PositiveIntegerField(help_text='Order within the poll')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('poll', models.ForeignKey(help_text='The poll this poll question belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='polls', to='core.poll')),
            ],
            options={
                'verbose_name': 'Poll Question',
                'verbose_name_plural': 'Poll Questions',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='PollQuestionResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('response_data', models.JSONField(help_text="The user's response data in JSON format")),
                ('associated_activity', models.ForeignKey(help_text='The poll associated with this question', on_delete=django.db.models.deletion.CASCADE, related_name='associated_poll_for_question', to='core.poll')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Poll Question Response',
                'verbose_name_plural': 'Poll Question Responses',
            },
        ),
        migrations.CreateModel(
            name='PollResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('associated_activity', models.ForeignKey(help_text='The poll associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_poll', to='core.poll')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Poll Response',
                'verbose_name_plural': 'Poll Responses',
            },
        ),
        migrations.CreateModel(
            name='Quiz',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('image', models.ImageField(blank=True, help_text='Optional Image to accompany the Quiz', null=True, upload_to='public/quiz/')),
                ('video', models.FileField(blank=True, help_text='Optional video to accompany the Quiz', null=True, upload_to='public/video', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['mp4'])])),
                ('passing_score', models.PositiveIntegerField(default=80, help_text='Minimum score required to pass the quiz')),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Quiz',
                'verbose_name_plural': 'Quizzes',
                'ordering': ['order', 'created_at'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Question',
            fields=[
                ('image', models.ImageField(blank=True, help_text='Optional image to accompany the Question', null=True, upload_to='public/question/')),
                ('video', models.FileField(blank=True, help_text='Optional video to accompany the Question', null=True, upload_to='public/question/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['mp4'])])),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('question_text', martor.models.MartorField(help_text='The text of the question')),
                ('feedback_config', django_jsonform.models.fields.JSONField(default=dict, help_text='Feedback configuration for correct/incorrect responses')),
                ('question_type', models.CharField(choices=[('multiple_choice', 'Multiple Choice'), ('true_false', 'True/False'), ('multiple_select', 'Multiple Select')], help_text='The type of question', max_length=20)),
                ('has_correct_answer', models.BooleanField(default=True, help_text='Whether this question has correct answers')),
                ('choices', django_jsonform.models.fields.JSONField(help_text='Available choices and correct answers for the question')),
                ('is_required', models.BooleanField(default=True, help_text='Whether this question must be answered')),
                ('order', models.PositiveIntegerField(help_text='Order within the quiz')),
                ('quiz', models.ForeignKey(help_text='The quiz this question belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='questions', to='core.quiz')),
            ],
            options={
                'verbose_name': 'Quiz Question',
                'verbose_name_plural': 'Quiz Questions',
                'ordering': ['order'],
            },
        ),
        migrations.CreateModel(
            name='Slideshow',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'ordering': ['order', 'created_at'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Slide',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('content', martor.models.MartorField(default='')),
                ('image', models.ImageField(blank=True, null=True, upload_to='public/slideshow/slides/images')),
                ('order', models.PositiveIntegerField(default=0)),
                ('slideshow', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='slides', to='core.slideshow')),
            ],
            options={
                'ordering': ('order',),
            },
        ),
        migrations.CreateModel(
            name='SlideshowResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('associated_activity', models.ForeignKey(help_text='The slideshow this response is for', on_delete=django.db.models.deletion.CASCADE, related_name='slideshow_responses', to='core.slideshow')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Slideshow Response',
                'verbose_name_plural': 'Slideshow Responses',
            },
        ),
        migrations.CreateModel(
            name='TextContent',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('content', martor.models.MartorField(blank=True, help_text='The main content text, can include HTML/markdown formatting', null=True)),
                ('image', models.ImageField(blank=True, help_text='Optional image to accompany the text content', null=True, upload_to='public/textcontent/')),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Reading',
                'verbose_name_plural': 'Readings',
                'ordering': ['order', 'created_at'],
            },
        ),
        migrations.CreateModel(
            name='TextContentResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('associated_activity', models.ForeignKey(help_text='The text content associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_textcontent', to='core.textcontent')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Text Content Response',
                'verbose_name_plural': 'Text Content Responses',
            },
        ),
        migrations.CreateModel(
            name='Twine',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('file', models.FileField(help_text='  \n                            An exported twine file with the extension ".html"<br>\n                            <br>\n                            The Twine story format must be "SugarCube", and in order to inform the\n                            app that a student has finshed the story, all ending passages must include the\n                            following text somewhere within them:<br>\n                            <br>\n                            <code>\n                                &lt;&lt;script&gt;&gt;<br>\n                                window.parent.postMessage({ type: "twineEnd" }, "*");<br>\n                                &lt;&lt;/script&gt;&gt;<br>\n                            </code><br>\n                            \n                            All images in the twine file should be prefixed with <code>image:&lt;filename&gt;</code>\n                            where the filename does not have any spaces (reccomended replace with underscores)    \n                            ', upload_to='public/twine/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['html'])])),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Twine Story',
                'verbose_name_plural': 'Twine Stories',
                'ordering': ['order', 'created_at'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='TwineResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('associated_activity', models.ForeignKey(help_text='The text content associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_twine', to='core.twine')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Twine Response',
                'verbose_name_plural': 'Twine Responses',
            },
        ),
        migrations.CreateModel(
            name='UserQuizResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('score', models.PositiveSmallIntegerField(blank=True, help_text="The user's score on this quiz", null=True)),
                ('completion_percentage', models.FloatField(default=0.0, help_text='Percentage completion of the lesson')),
                ('associated_activity', models.ForeignKey(help_text='The quiz this response is for', on_delete=django.db.models.deletion.CASCADE, related_name='quiz_responses', to='core.quiz')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'quiz response',
                'verbose_name_plural': 'quiz responses',
                'unique_together': {('user', 'associated_activity')},
            },
        ),
        migrations.CreateModel(
            name='Video',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('video', models.FileField(upload_to='public/video/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['mp4'])])),
                ('scrubbable', models.BooleanField(default=False, help_text='Whether the video can be scrubbed by the user')),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Video',
                'verbose_name_plural': 'Videos',
                'ordering': ['order', 'created_at'],
            },
        ),
        migrations.CreateModel(
            name='VideoResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('watched_percentage', models.FloatField(default=0.0, help_text='Percentage of the video that has been watched')),
                ('associated_activity', models.ForeignKey(help_text='The video activity associated with this response', on_delete=django.db.models.deletion.CASCADE, related_name='associated_video', to='core.video')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Video Response',
                'verbose_name_plural': 'Video Responses',
            },
        ),
        migrations.CreateModel(
            name='Writing',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('title', models.CharField(help_text='The title of the activity', max_length=200, validators=[django.core.validators.MinLengthValidator(3)])),
                ('order', models.PositiveIntegerField(help_text='Order of the activity within the lesson. When creating a new activity,<br> this value should be 1 + the number of activities in the lesson found above.')),
                ('instructions', martor.models.MartorField(blank=True, help_text='Instructions for completing the activity', null=True, verbose_name='Instructions')),
                ('instructions_image', models.ImageField(blank=True, help_text='An optional helpful image to display alongside the instructions.', null=True, upload_to='public/instructions/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('prompts', django_jsonform.models.fields.JSONField(default=list, help_text='List of writing prompts for the activity')),
                ('lesson', models.ForeignKey(help_text='The lesson this activity belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_activities', to='core.lesson')),
            ],
            options={
                'verbose_name': 'Writing',
                'verbose_name_plural': 'Writings',
                'ordering': ['order', 'created_at'],
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='WritingResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='the uuid of the database item', primary_key=True, serialize=False)),
                ('partial_response', models.BooleanField(default=True)),
                ('time_spent', models.PositiveIntegerField(default=0)),
                ('attempts_left', models.PositiveIntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True, null=True)),
                ('updated_at', models.DateTimeField(auto_now=True, null=True)),
                ('responses', models.JSONField(default=list, help_text="The user's written responses in JSON Array format")),
                ('associated_activity', models.ForeignKey(help_text='The writing that was answered', on_delete=django.db.models.deletion.CASCADE, related_name='associated_writing', to='core.writing')),
                ('lesson', models.ForeignKey(help_text='The lesson related to this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('user', models.ForeignKey(help_text='The user who submitted this response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Writing Response',
                'verbose_name_plural': 'Writing Responses',
            },
        ),
        migrations.CreateModel(
            name='UserQuestionResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('attempts_left', models.PositiveBigIntegerField(default=3, help_text='Number of attempts remaining for this question')),
                ('partial_response', models.BooleanField(default=True, help_text='Whether this is still in progress')),
                ('response_data', models.JSONField(help_text="The user's response data in JSON format")),
                ('is_correct', models.BooleanField(blank=True, help_text='Whether this response is correct (null if not automatically gradable)', null=True)),
                ('feedback', models.TextField(blank=True, help_text='Feedback provided for this response', null=True)),
                ('time_spent', models.IntegerField(blank=True, help_text='The total time spent on this question', null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('lesson', models.ForeignKey(help_text='The lesson related to this question response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_lesson', to='core.lesson')),
                ('question', models.ForeignKey(help_text='The question that was answered', on_delete=django.db.models.deletion.CASCADE, related_name='user_responses', to='core.question')),
                ('user', models.ForeignKey(help_text='The user who submitted this question response', on_delete=django.db.models.deletion.CASCADE, related_name='%(class)s_response_user', to=settings.AUTH_USER_MODEL)),
                ('quiz_response', models.ForeignKey(help_text='The parent quiz response this question response belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='question_responses', to='core.userquizresponse')),
            ],
            options={
                'verbose_name': 'question response',
                'verbose_name_plural': 'question responses',
                'unique_together': {('quiz_response', 'question')},
            },
        ),
    ]
