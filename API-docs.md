## All endpoints that require authentication

All endpoints that require a current user to be logged in.

* Request: endpoints that require authentication
* Error Response: Require authentication
  * Status Code: 401
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Authentication required"
    }
    ```

### All endpoints that require proper authorization

All endpoints that require authentication and the current user does not have the
correct role(s) or permission(s).

* Request: endpoints that require proper authorization
* Error Response: Require proper authorization
  * Status Code: 403
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Forbidden"
    }
    ```

### Get the Current User

Returns the information about the current user that is logged in.

* Require Authentication: false
* Request
  * Method: GET
  * URL: /api/session
  * Body: none

* Successful Response when there is a logged in user
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "detail":"successful response for getting current user",
      "data": {
        "user": {
          "id": 1,
          "firstName": "John",
          "lastName": "Smith",
          "email": "john.smith@gmail.com",
          "username": "JohnSmith"
        }
      }
    }
    ```

* Successful Response when there is no logged in user
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "user": null
    }
    ```

### Log In a User

Logs in a current user with valid credentials and returns the current user's
information.

* Require Authentication: false
* Request
  * Method: POST
  * URL: /api/session
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "credential": "john.smith@gmail.com",
      "password": "secret password"
    }
    ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "detail":"",
      "data": {},
      "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
      }
    }
    ```

* Error Response: Invalid credentials
  * Status Code: 401
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Invalid credentials"
    }
    ```

* Error response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "credential": "Email or username is required",
        "password": "Password is required"
      }
    }
    ```

### Sign Up a User

Creates a new user, logs them in as the current user, and returns the current
user's information.

* Require Authentication: false
* Request
  * Method: POST
  * URL: /api/users
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "firstName": "John",
      "lastName": "Smith",
      "email": "john.smith@gmail.com",
      "username": "JohnSmith",
      "password": "secret password",
      "passwordConfirm": "secret password"
    }
    ```

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "detail": "successful user creation completed",
      "data": {
        "user": {
        "id": 1,
        "firstName": "John",
        "lastName": "Smith",
        "email": "john.smith@gmail.com",
        "username": "JohnSmith"
        }
      },

    }
    ```

* Error response: User already exists with the specified email
  * Status Code: 500
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "email": "User with that email already exists"
      }
    }
    ```

* Error response: User already exists with the specified username
  * Status Code: 500
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "User already exists",
      "errors": {
        "username": "User with that username already exists"
      }
    }
    ```

* Error response: Body validation errors
  * Status Code: 400
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "Bad Request", // (or "Validation error" if generated by Sequelize),
      "errors": {
        "email": "Invalid email",
        "username": "Username is required",
        "firstName": "First Name is required",
        "lastName": "Last Name is required"
      }
    }
    ```
## quiz

### get a quiz by id

Retrieves a quiz by its ID.

* Request
  * Method: GET
  * URL: /api/quiz/:id
  * Body: None

* Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
    ```json
    {
      "detail":" successfully retrieved a quiz by its id",
      "data": {
        "id": "12345",
        "title": "Random Quiz Title",
        "lesson_id": "67890",
        "instructions": "Complete all questions within 10 minutes.",
        "passing_score": 80,
        "feedback": "Great job! Keep practicing."
      },
    }
    ```

### submit a quiz

submits results of quiz along with its data

* Require Authentication: true
* Request
  * Method: POST
  * URL: /api/test/:id
  * Body:

    ```json
    {
      "userId": 1,
      "testId": 1,
      "answers": {
        1:"a",
        2:"b"
      },
      "timeStarted": "12:00",
      "timeFinished": "13:30",
      "totalTimeTaken": "1h 30m",
      "moreDataWeWant": "more data here"
    }
    ```

  * Successful Response
    * Status Code: 200
    * Headers:
      * Content-Type: application/json
    * Body:

      ```json
      {
        "detail":" successfully submitted a quiz and recieved its results",
        "data": {
          "testId":1,
          "userId":1,
          "score":70,
          "totalTimeTaken": "1h"
        },
      }
      ```

## text content

### get text content by lesson id

Returns all the readings

* Require Authentication: true
* Request
  * Method: GET
  * URL: /api/readings/:lessonId
  * Body: none

* Successful Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "detail":" successfully retrieved text content by its lesson id",
      "data": {
        "Readings": [
          {
            "id": 1,
            "lessonId": 9495793,
            "title": "first reading",
            "order": 1,
            "content": "Lorem ipsum ...",
            "readingPt2": "Lorem ipsum ...",
            "CreatedAt": "2025-02-24 09:40:06.183551",
            "UpdatedAt": "2025-02-24 09:40:06.183551"
          }
        ]
      },
    }
    ```
* Error response: Couldn't find a reading with the specified id
  * Status Code: 404
  * Headers:
    * Content-Type: application/json
  * Body:

    ```json
    {
      "message": "text content couldn't be found with this id"
    }
    ```
## lesson

### get a lesson by id

Retrieves a lesson by its ID.

* Request
  * Method: GET
  * URL: /api/lessons/:id
  * Body: None

* Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
    ```json
    {
      "detail":"successfully retrieved a lesson by its id",
      "data": {
        "id": "1",
        "title": "college 101",
        "description": "helps you with college basics",
        "objectives": ["Understand college system", "learn what kind of colleges there are"],
        "created_at": "2024-02-01T12:00:00Z",
        "updated_at": "2024-02-15T08:30:00Z"
      },
    }
    ```
## video content

### get video content by lesson id

Retrieves video content by its lesson Id.

* Request
  * Method: GET
  * URL: /api/video-content/:lessonId
  * Body: None

* Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
    ```json
    {
      "detail":" successfully retrieved video content by its lesson id",
        "data": {
        "id": "20",
        "lesson_id": "1",
        "title": "Introduction Video",
        "order": 2,
        "description": "An introductory video on programming concepts.",
        "video_metadata": {"duration": "5 minutes", "resolution": "1080p"},
        "created_at": "2024-02-02T14:30:00Z",
        "updated_at": "2024-02-15T09:15:00Z"
      },
    }
    ```

### get media asset by id
Retrieves a media asset by its videocontent id.

* Request
  * Method: GET
  * URL: /api/media-asset/:videoContentId
  * Body: None

* Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
    ```json
    {
      "detail":"",
      "data": {
        "id": "30",
        "video_content_id": "20",
        "file_path": "https://example.com/video.mp4",
        "asset_type": "video",
        "metadata": {"codec": "H.264", "bitrate": "3Mbps"},
        "content_type": "video/mp4",
        "file_size": 52428800,
        "created_at": "2024-02-02T15:00:00Z"
      },
    }
    ```
## poll

### get a poll by lesson id

Retrieves a poll by its lesson id.

* Request
  * Method: GET
  * URL: /api/poll/:id
  * Body: None

* Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
    ```json
    {
      "detail":"successfully retireved poll by its lesson id",
      "data": {
        "id": "40",
        "lesson_id": "1",
        "title": "what is your plan for college",
        "order": 3,
        "instructions": "pick your preferred option",
        "configuration": {"allow_multiple": false},
        "created_at": "2024-02-02T16:00:00Z",
        "updated_at": "2024-02-15T10:00:00Z"
      },
    }
    ```

### poll question

get all poll questions based on the poll id

* Request
  * Method: GET
  * URL: /api/poll-question/:pollId
  * Body: None

* Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
    ```json
    {
      "detail":"successfully retrieved poll question by its poll id",
      "data": {
        "id":1,
        "poll_id":93549349,
        "questionText": "what is your favorite thing about college?",
        "options": {"option1": "some options here"},
        "allow_multiple": False,
        "order":1,
        "created_at": "2024-02-02T16:00:00Z",
        "updated_at": "2024-02-15T10:00:00Z"
      },
    }
    ```

## writing activity

### get a writing activity by its lesson id

Retrieves a writing activity by its lesson id.

* Request
  * Method: GET
  * URL: /api/writing-activity/:lessonId
  * Body: None

* Response
  * Status Code: 200
  * Headers:
    * Content-Type: application/json
  * Body:
    ```json
    {
      "detail":" successfully retrieved writing activity by lesson id",
      "data": {
        "id": "50",
        "lesson_id": "1",
        "title": "Write a Short Paragraph about what you learned",
        "order": 4,
        "instructions": "Write your favorite part of what you've read or watched.",
        "prompts": ["take your time", "be honest when answering"],
        "created_at": "2024-02-02T17:00:00Z",
        "updated_at": "2024-02-15T11:00:00Z"
      },
    }
    ```
